<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration</title>
    <link rel="stylesheet" href="../../CSS/new.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>


<body>

<header>
    <h1 class="banner">Administration</h1>
</header>

<div class="admin-grid">
    
    <div class="sidebar">
        <p>Produkter</p>
    </div>
    
    <div class="column2">

        <div class="column2-header">
            <p>Ny produkt</p>
        </div>

        <form id="new-product-form" method="POST" action="/api/products">
            <label for="name">Namn</label>
            <input type="text" id="name" name="name" placeholder="">

            <label for="beskrivning">Beskrivning</label>
            <textarea id="beskrivning" name="beskrivning" placeholder=""></textarea> 

            <label for="bild">Bild</label>
            <input type="file" id="bild" name="bild">

            <label for="sku">SKU</label>
            <input type="text" id="sku" name="sku" placeholder="">

            <label for="pris">Pris</label>
            <input type="number" id="pris" name="pris" placeholder="">



            <label class="checkbox" for="option1">
                <input class="checkbox" type="checkbox" id="option1" name="options" value="option1">
                T-Shirts
            </label>
    
            <label class="checkbox" for="option2">
                <input class="checkbox" type="checkbox" id="option2" name="options" value="option2">
                Sommar
            </label>
    
            <label class="checkbox" for="option3">
                <input class="checkbox" type="checkbox" id="option3" name="options" value="option3">
                Byxor
            </label>
    
            <label class="checkbox" for="option4">
                <input class="checkbox" type="checkbox" id="option4" name="options" value="option4">
                Skor
            </label>
    
            <button class="add-button" type="submit">L채gg till</button>
        </form>
        
    </div>

</div>

<footer>

</footer>

<script>
    document.getElementById('new-product-form').addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent the default form submission

        // Create a FormData object from the form
        const formData = new FormData(event.target);

        try {
            const response = await fetch('/api/products', {
                method: 'POST',
                body: formData
            });

            if (!response.ok) {
                throw new Error('N책got gick fel med att l채gga till produkten');
            }

            const result = await response.json();
            console.log('Produkt tillagd:', result);
            
            // Redirect to the "Lista produkter" page
            window.location.href = '/admin/products'; // Change this to the correct URL for your product list
        } catch (error) {
            console.error('Error:', error);
            alert('Kunde inte l채gga till produkten: ' + error.message);
        }
    });
</script>

</body>
</html>
    