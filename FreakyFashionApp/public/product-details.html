<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laddar...</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/products-details.css">
    
    <script>
        // Hämta slug från URL:en
        const slug = window.location.pathname.split('/').pop();

        // Hämta produktdata från servern via API-endpoint
        fetch(`/api/products/${slug}`)
            .then(response => {
                if (!response.ok) { // Kolla om svaret är 404 eller något annat fel
                    throw new Error('Product not found');
                }
                return response.json();
            })
            .then(product => {
                // Uppdatera sidans titel med produktens namn
                document.title = product.name;

                // Uppdatera andra delar av sidan, som produktnamn, pris, etc.
                document.querySelector('.selected-product-headline').innerText = product.name;
                document.querySelector('.selected-product-brand').innerText = product.brand;
                document.querySelector('.selected-product-description').innerText = "Beskrivning av produkten kommer här"; 
                document.querySelector('.selected-product-price').innerText = product.price;
                document.querySelector('.product-img img').src = product.imageUrl;
            })
            .catch(error => {
                console.error('Error fetching product data:', error);
                document.querySelector('.selected-product-headline').innerText = "Product not found";
            });
    </script>
</head>

<body>
<header>

    <div class="header-logo-div">
        <a href="/">
            <img src="../images/freaky-fashion-logo.png" alt="missing logo">  
        </a>
    </div>
    
    <div class="header-search-div">
        <a href=""> 
            <i class="fa-solid fa-magnifying-glass"></i>
        </a>
        <input type="text" placeholder="Sök produkt">
    </div>
    
    <div class="header-icons-div">
        <a class="favorites-logo" href="">
            <i class="fa-solid fa-heart"></i>
        </a>

        <a class="cart-logo" href="">
            <i class="fa-solid fa-basket-shopping"></i>
        </a>
    </div>

    <div class="header-menu-div">
        <a href="#Nyheter">Nyheter</a>
        <a href="#Kategori">Kategori</a>
        <a href="#Topplistan">Topplistan</a>
        <a href="#Rea">Rea</a>
        <a href="#Kampanjer">Kampanjer</a>
    </div>
            
</header>


<div class="selected-product">
    <div class="product-img">
        <a href="#ssxsxxs">
            <img src="../images/product.png" alt="">
            <i class="fa-regular fa-heart"></i>
        </a>
    </div>

    <div class="selected-product-text-div">
        <h4 class="selected-product-headline">Svart T-shirt</h4>
        <p class="selected-product-brand">Levis</p>
        <p class="selected-product-description">Lorem ipsum dolor sit amet consectetur adipisicing elit. Libero totam quia laudantium iste facilis quod optio! Obcaecati veritatis sunt recusandae cum! Rem, beatae eligendi ratione porro laudantium perspiciatis animi soluta!</p>
        <h4 class="selected-product-price">199 SEK</h4>
        <a href="#LäggTillIVarukorgen" class="selected-product-button">Lägg i varukorg</a>
    </div>
</div>

<div id="similar-products-grid">
    <p>Liknande produkter</p>
    <!--
    <div class="product">
        <a href="#ssxsxxs">
            <img src="../images/product.png" alt="">
            <i class="fa-regular fa-heart"></i>
        </a>

        <div class="product-text-div">
            <h4 class="product-description">Svart T-shirt</h4>
            <h4 class="product-price">199 SEK</h4>
            <p class="product-brand">Levis</p>
        </div>
    </div>

    <div class="product">
        <a href="#ssxsxxs">
            <img src="../images/product.png" alt="">
            <i class="fa-regular fa-heart"></i>
        </a>

        <div class="product-text-div">
            <h4 class="product-description">Svart T-shirt</h4>
            <h4 class="product-price">199 SEK</h4>
            <p class="product-brand">Levis</p>
        </div>
    </div>

    <div class="product">
        <a href="#ssxsxxs">
            <img src="../images/product.png" alt="">
            <i class="fa-regular fa-heart"></i>
        </a>

        <div class="product-text-div">
            <h4 class="product-description">Svart T-shirt</h4>
            <h4 class="product-price">199 SEK</h4>
            <p class="product-brand">Levis</p>
        </div>
    </div>
    -->
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // List of products
        const products = [
            { name: "Svart T-shirt", price: "199 SEK", brand: "Levis", imageUrl: "../images/product.png", slug: "svart-tshirt", isNew: true },
            { name: "Vit T-shirt", price: "249 SEK", brand: "Nike", imageUrl: "../images/product.png", slug: "vit-tshirt", isNew: false },
            { name: "Blå T-shirt", price: "179 SEK", brand: "Adidas", imageUrl: "../images/product.png", slug: "bla-tshirt", isNew: false },
            { name: "Grön T-shirt", price: "299 SEK", brand: "Puma", imageUrl: "../images/product.png", slug: "gron-tshirt", isNew: false },
            { name: "Gul T-shirt", price: "159 SEK", brand: "H&M", imageUrl: "../images/product.png", slug: "gul-tshirt", isNew: false },
            { name: "Röd T-shirt", price: "199 SEK", brand: "Zara", imageUrl: "../images/product.png", slug: "rod-tshirt", isNew: false },
            { name: "Lila T-shirt", price: "279 SEK", brand: "Gucci", imageUrl: "../images/product.png", slug: "lila-tshirt", isNew: false },
            { name: "Orange T-shirt", price: "229 SEK", brand: "Reebok", imageUrl: "../images/product.png", slug: "orange-tshirt", isNew: false }
        ];

        // Function to get random products
        function getRandomProducts(productArray, count) {
            const shuffled = productArray.sort(() => 0.5 - Math.random()); // Randomize product order
            return shuffled.slice(0, count); // Get the first 'count' products
        }

        // Get the container element for similar products
        const similarProductsContainer = document.getElementById('similar-products-grid');

        // Fetch 3 random products
        const randomProducts = getRandomProducts(products, 3);

        // Generate HTML for each product and add it to the container
        randomProducts.forEach(product => {
            const productHTML = `
                <div class="product">
                    <a href="/products/${product.slug}">
                        <img src="${product.imageUrl}" alt="${product.name}">
                        <i class="fa-regular fa-heart"></i>
                    </a>
                    <div class="product-text-div">
                        <h4 class="product-description">${product.name}</h4>
                        <h4 class="product-price">${product.price}</h4>
                        <p class="product-brand">${product.brand}</p>
                    </div>
                </div>
            `;
            similarProductsContainer.innerHTML += productHTML;
        });
    });


</script>

<div class="products-footer-div">

    <div class="product-footer-item-div">
        <i class="fa-solid fa-earth-americas"></i>
        <p>Gratis frakt och returer</p>
    </div>

    <div class="product-footer-item-div">
        <i class="fa-solid fa-plane"></i>
        <p>Expressfrakt</p>
    </div>

    <div class="product-footer-item-div">
        <i class="fa-solid fa-shield"></i>
        <p>Säkra betalningar</p>
    </div>

    <div class="product-footer-item-div">
        <i class="fa-regular fa-face-smile"></i>
        <p>Nyheter varje dag</p>
    </div>
</div>

<footer>

    <div class="normal-footer-menu">
        <div class="footer-row">
            <div class="footer-col">
                <h1>Shopping</h1>
                <a href="">Vinterjackor</a>
                <a href="">Pufferjackor</a>
                <a href="">Kappa</a>
                <a href="">Trenchcoats</a>
            </div>
        
            <div class="footer-col">
                <h1>Mina Sidor</h1>
                <a href="">Mina Ordrar</a>
                <a href="">Mitt Konto</a>
            </div>
        
            <div class="footer-col">
                <h1>Kundtjänst</h1>
                <a href="">Returnpolicy</a>
                <a href="">Integritetspolicy</a>
            </div>
        </div>
    </div>

    <div class="accordion" id=accordion>
        <div class="container">

            <div class="card">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            Shopping
                        </button>
                    </h5>
                </div>
    
                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        <a href="#123">Vinterjackor</a>
                        <a href="#123">Pufferjackor</a>
                        <a href="#123">Kappa</a>
                        <a href="#123">Trenchcoats</a>
                    </div>
                </div>
            </div>
    
    
    
            <div class="card">
                <div class="card-header" id="headingTwo">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Mina Sidor
                        </button>
                    </h5>
                </div>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                    <div class="card-body">
                        <a href="#123">Mina Ordrar</a>
                        <a href="#123">Mitt Konto</a>
                    </div>
                </div>
            </div>
    
    
            <div class="card">
                <div class="card-header" id="headingThree">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Kundtjänst
                        </button>
                    </h5>
                </div>
                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                    <div class="card-body">
                        <a href="#123">Returnpolicy</a>
                        <a href="#123">Integritetspolicy</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    

    <div class="copywright-div">
        <i class="fa-regular fa-copyright"></i>
        <p>Freaky Fashion</p>
    </div>

</footer>
</body>
</html>
